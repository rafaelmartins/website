{{ define "title" }}{{ if .Content.Entry.Project.IsRoot }}{{ required .Content.Entry.Project.Repo }}{{
  else }}{{ required .Content.Entry.Project.Repo }}: {{ required .Content.Title }}{{
  end }} - {{ required .Config.Title }}{{ end }}

{{ define "extra_head" -}}
{{- if and .Content.Entry.Project.GoImport .Content.Entry.Project.IsRoot }}
<meta name="go-import" content="{{ requiredAttr .Content.Entry.Project.GoImport }} git https://github.com/{{ requiredAttr .Content.Entry.Project.Owner }}/{{ if .Content.Entry.Project.GoRepo }}{{ requiredAttr .Content.Entry.Project.GoRepo }}{{ else }}{{ requiredAttr .Content.Entry.Project.Repo }}{{ end }}.git">
{{- end }}
{{- end }}

{{ define "main" -}}
<article class="anchor">
  <h1 class="title">{{ required .Content.Entry.Project.Repo }}</h1>
  {{- if gt (len .Content.Entry.Project.Menus) 1 }}
  <div class="tabs">
    <ul class="m-0">
      {{- range .Content.Entry.Project.Menus }}
      <li{{ if .Active }} class="is-active"{{ end }}><a href="{{ .URL }}">{{ .Title }}</a></li>
      {{- end }}
    </ul>
  </div>
  {{- if .Content.Entry.Title }}
  <h1 class="title">{{ required .Content.Entry.Title }}</h1>
  {{- end }}
  {{- end }}
{{ .Content.Entry.Body }}
</article>
{{- if .Content.Entry.Project.LatestRelease }}
<article class="anchor mt-6">
  <h1 class="title"><i class="fa-solid fa-sm fa-rocket"></i> {{ .Content.Entry.Project.LatestRelease.Name }}</h1>
{{ .Content.Entry.Project.LatestRelease.Body }}
</article>
{{- end }}
{{- end }}

{{ define "sidebar" -}}
<div class="notification has-text-centered">
  <span class="icon">
    <i class="fa-lg fa-brands fa-github"></i>
  </span>
  <a href="https://github.com/{{ requiredAttr .Content.Entry.Project.Owner }}/{{ requiredAttr .Content.Entry.Project.Repo }}">
    <strong>{{ required .Content.Entry.Project.Owner }}/{{ required .Content.Entry.Project.Repo }}</strong>
  </a>
</div>
{{- if or .Content.Entry.Project.URL (not .Content.Entry.Project.Licenses) }}
<table class="table is-fullwidth">
  <thead>
    <tr>
      <th colspan="2" class="has-text-centered">Project Metadata</th>
    </tr>
  </thead>
  <tbody>
    {{- if .Content.Entry.Project.URL }}
    <tr>
      <th>Website:</th>
      <td>
        <a href="{{ requiredAttr .Content.Entry.Project.URL }}">{{ .Content.Entry.Project.URL }}</a>
      </td>
    </tr>
    {{- end }}
    {{- if not .Content.Entry.Project.Licenses }}
    <tr>
      <th>License:</th>
      <td>
        <a href="https://spdx.org/licenses/{{ requiredAttr .Content.License }}.html">{{ .Content.License }}</a>
      </td>
    </tr>
    {{- end }}
  </tbody>
</table>
{{- end }}
{{- if .Content.Entry.Project.Licenses }}
<table class="table is-fullwidth">
  <thead>
    <tr>
      <th colspan="2" class="has-text-centered">Open Source Licenses</th>
    </tr>
  </thead>
  <tbody>
    {{- range .Content.Entry.Project.Licenses }}
    <tr>
      <th>{{ required .Title }}</th>
      <td>
        <a href="https://spdx.org/licenses/{{ requiredAttr .SpdxId }}.html">{{ .SpdxId }}</a>
      </td>
    </tr>
    {{- end }}
  </tbody>
</table>
{{- end }}
{{- if or .Content.Entry.Project.GoImport .Content.Entry.Project.CDocsURL }}
<table class="table is-fullwidth">
  <thead>
    <tr>
      <th colspan="2" class="has-text-centered">API Documentation</th>
    </tr>
  </thead>
  <tbody>
    {{- if .Content.Entry.Project.CDocsURL }}
    <tr>
      <th style="width: 48px;"><span class="icon"><i class="fa-solid fa-book"></i></span></th>
      <td>
        <a href="{{ requiredAttr .Content.Entry.Project.CDocsURL }}">C API Documentation</a>
      </td>
    </tr>
    {{- end }}
    {{- if .Content.Entry.Project.GoImport }}
    <tr>
      <th style="width: 48px;"><span class="icon"><i class="fa-brands fa-golang"></i></span></th>
      <td>
        <a href="https://pkg.go.dev/{{ requiredAttr .Content.Entry.Project.GoImport }}">{{ .Content.Entry.Project.GoImport }}</a>
      </td>
    </tr>
    {{- end }}
  </tbody>
</table>
{{- end }}
<table class="table is-fullwidth">
  <thead>
    <tr>
      <th colspan="2" class="has-text-centered">Project Statistics</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th><span class="icon"><i class="fa-regular fa-star"></i></span> Stars:</th>
      <td>{{ .Content.Entry.Project.Stars }}</td>
    </tr>
    <tr>
      <th><span class="icon"><i class="fa-regular fa-eye"></i></span> Watching:</th>
      <td>{{ .Content.Entry.Project.Watching }}</td>
    </tr>
    <tr>
      <th><span class="icon"><i class="fa-solid fa-code-fork"></i></span> Forks:</th>
      <td>{{ .Content.Entry.Project.Forks }}</td>
    </tr>
  </tbody>
  {{- if not .Content.Entry.Project.LatestRelease }}
  <tfoot>
    <tr>
      <td colspan="2" class="has-text-centered is-size-7">
        <strong class="has-text-grey-light">Updated:</strong>
        <time class="has-text-grey-light" datetime="{{ .Time }}">{{ .Time.Format "2006-01-02 15:04:05" }} UTC</time>
      </td>
    </tr>
  </tfoot>
  {{- end }}
</table>
{{- if .Content.Entry.Project.LatestRelease }}
<table class="table is-fullwidth">
  <thead>
    <tr>
      <th colspan="2" class="has-text-centered">Latest Release</th>
    </tr>
  </thead>
  <tbody>
    {{- if eq .Content.Entry.Project.LatestRelease.Name .Content.Entry.Project.LatestRelease.Tag }}
    <tr>
      <td colspan="2">
        <span class="icon"><i class="fa-solid fa-rocket"></i></span>
        <a href="{{ requiredAttr .Content.Entry.Project.LatestRelease.URL }}">{{ required .Content.Entry.Project.LatestRelease.Name }}</a>
      </td>
    </tr>
    {{- else }}
    <tr>
      <td>
        <span class="icon"><i class="fa-solid fa-rocket"></i></span>
        <a href="{{ requiredAttr .Content.Entry.Project.LatestRelease.URL }}">{{ required .Content.Entry.Project.LatestRelease.Name }}</a>
      </td>
      <td>{{ required .Content.Entry.Project.LatestRelease.Tag }}</td>
    </tr>
    {{- end }}
    {{- if .Content.Entry.Project.LatestRelease.Files }}
    <tr>
      <th colspan="2" class="has-text-centered">Files</th>
    </tr>
    {{- end }}
    {{- range .Content.Entry.Project.LatestRelease.Files }}
    <tr>
      <td colspan="2">
        <span class="icon"><i class="fa-solid fa-box-archive"></i></span>
        <a href="{{ requiredAttr .URL }}">{{ required .File }}</a>
      </td>
    </tr>
    {{- end }}
  </tbody>
  <tfoot>
    <tr>
      <td colspan="2" class="has-text-centered is-size-7">
        <strong class="has-text-grey-light">Updated:</strong>
        <time class="has-text-grey-light" datetime="{{ .Time }}">{{ .Time.Format "2006-01-02 15:04:05" }} UTC</time>
      </td>
    </tr>
  </tfoot>
</table>
{{- end }}
{{- end }}
